<view class="pay-wraps"><view class="pay-main"><block wx:if="{{haveAddress}}"><view data-event-opts="{{[['tap',[['toAddress',['$event']]]]]}}" class="pay-location disFlex" bindtap="__e"><view class="location-img"><image src="/static/location.png"></image></view><view class="location-main"><view class="location-person">{{''+address.username+''}}<text class="location-phone">{{address.phone}}</text></view><view class="location-text">{{''+address.address+" "+address.detail_address+''}}</view></view><view class="location-edit"><image src="/static/to-right.png"></image></view></view></block><block wx:if="{{!haveAddress}}"><view data-event-opts="{{[['tap',[['toAddress',['$event']]]]]}}" class="pay-location disFlex" bindtap="__e"><view class="location-img"><image src="/static/location.png"></image></view><view class="location-main2">请选择地址</view><view class="location-edit"><image src="/static/to-right.png"></image></view></view></block><view class="pay-item"><block wx:if="{{payList.length>0}}"><view class="pay-title">订单信息</view></block><block wx:for="{{payList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="pay-text"><view class="text-img"><image src="{{item.cover}}"></image></view><view class="text-intr"><view class="intr-name">{{''+item.goods_name+''}}</view><block wx:if="{{item.norms_name||item.sku_name}}"><view class="intr-norm "><view class="intr-norm1 line1">{{''+(item.norms_name||item.sku_name)+''}}</view><view class="intr-norm2"></view></view></block><view class="text-prices"><view><text class="symbol">￥</text>{{item.price+''}}</view><block wx:if="{{item.freight}}"><view class="text-freight">{{'运费￥'+(item.freight||0)+''}}</view></block></view></view><view class="text-price"><view class="text-num">{{'x'+item.number+''}}</view></view></view></block><block wx:if="{{outPayList.length>0}}"><view class="invalid">失效商品</view></block><block wx:for="{{outPayList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="pay-text"><view class="text-img"><image class="text-img2" src="{{item.cover}}"></image></view><view class="text-intr"><view class="intr-name intr-name2">{{''+item.goods_name+''}}</view><block wx:if="{{item.norms_name||item.sku_name}}"><view class="intr-norm "><view class="intr-norm1 line1">{{''+(item.norms_name||item.sku_name)+''}}</view><view class="intr-norm2"></view></view></block><view class="text-prices text-invalid">此商品该地区不支持配送！</view></view><view class="text-price"><view class="text-num">{{'x'+item.number+''}}</view></view></view></block><view class="pay-fare pay-common"><view class="pay-left-common">运费</view><view class="pay-right-common">总计<text class="symbol">￥</text>{{totalFreight}}</view></view><view data-event-opts="{{[['tap',[['useCard',['$event']]]]]}}" class="pay-card pay-common" bindtap="__e"><view class="pay-left-common">现金券</view><view class="pay-right-common pay-right-witch">{{"现金券抵扣"+(cashMoney||0)+"元"}}</view><image src="/static/to-right.png"></image></view><view class="pay-remarks pay-common"><view class="pay-left-common">发票</view><view class="pay-right-common"><view class="pay-right-common pay-right">需要发票请联系客服</view></view></view><view class="pay-subtotal"><text class="subtotal-num margingRight20">{{"共"+num+"件"}}</text><text>小计：</text><text class="subtotal-price"><text class="symbol">￥</text>{{totalMoney}}</text></view></view></view><view class="pay-footer"><view class="pay-text">实付金额：<text class="pay-price"><text class="symbol">￥</text>{{totalMoney}}</text></view><view data-event-opts="{{[['tap',[['isOuts',['$event']]]]]}}" class="pay-btn" bindtap="__e">支付订单</view></view><view class="blank"></view><q-s-popup class="vue-ref" vue-id="7980438b-1" type="fadeInUp" data-ref="QSPopupTicket" bind:__l="__l" vue-slots="{{['default']}}"><view class="ticket"><block wx:if="{{cashList.length>0}}"><view class="ticket-main"><view class="ticket-title">优惠券<image class="close-out" src="/static/out.png" data-event-opts="{{[['tap',[['hides',['QSPopupTicket']]]]]}}" bindtap="__e"></image></view><block wx:for="{{cashList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="ticket-item"><view class="{{['ticket-space',item.is_available==0?'ticket-gray':'']}}"><view class="ticket-price">￥<text>{{item.money}}</text>现金券</view><text class="ticket-intr">{{'订单金额满 '+item.at_least+" 可使用  \n  有效期"+item.start_time+" -- "+item.end_time+''}}</text></view><block wx:if="{{item.is_available==1}}"><view class="ticket-select"><block wx:if="{{item.checked}}"><image class="select-img" src="{{selectImg}}" data-event-opts="{{[['tap',[['selectedCash',['$0',i],[[['cashList','',i]]]]]]]}}" bindtap="__e"></image></block><block wx:else><image class="select-img" src="{{unSelectImg}}" data-event-opts="{{[['tap',[['selectedCash',['$0',i],[[['cashList','',i]]]]]]]}}" bindtap="__e"></image></block></view></block></view></block></view></block><block wx:else><view class="nodata">暂无优惠券~</view></block><view data-event-opts="{{[['tap',[['hideCash',['$event']]]]]}}" class="sure-btn" bindtap="__e">确定</view></view></q-s-popup><q-s-popup class="vue-ref" vue-id="7980438b-2" type="fadeInUp" data-ref="QSPopupChoose" bind:__l="__l" vue-slots="{{['default']}}"><view class="choosepay"><view class="choose-title">支付订单<image src="/static/out.png" data-event-opts="{{[['tap',[['hides',['QSPopupChoose']]]]]}}" bindtap="__e"></image></view><view class="choose-price">￥<text>{{totalMoney}}</text></view><block wx:for="{{chooseList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['choose',['$0',index],[[['chooseList','',index]]]]]]]}}" class="choose-item" bindtap="__e"><view class="choose-item-l"><image src="{{item.src}}"></image>{{''+item.name+''}}</view><view class="choose-item-r"><image class="select-img" src="{{item.checked?selectImg:unSelectImg}}" data-event-opts="{{[['tap',[['choose',['$0',index],[[['chooseList','',index]]]]]]]}}" bindtap="__e"></image></view></view></block><view data-event-opts="{{[['tap',[['putorder',['$event']]]]]}}" class="sure-btn" bindtap="__e">确认支付</view></view></q-s-popup><q-s-popup class="vue-ref" vue-id="7980438b-3" data-ref="QSPopupSuccess" bind:__l="__l" vue-slots="{{['default']}}"><view class="success"><image src="/static/pay-success.png"></image>支付成功</view></q-s-popup><q-s-popup class="vue-ref" vue-id="7980438b-4" data-ref="QSPopupYinhka" bind:__l="__l" vue-slots="{{['default']}}"><view class="yinkka"><rich-text nodes="{{yinhkaHTML}}"></rich-text></view></q-s-popup><block wx:if="{{isPay}}"><keyboard-pay vue-id="7980438b-5" payMoney="{{totalMoney}}" payTitle="{{cashTitle}}" source="{{source}}" data-event-opts="{{[['^payCode',[['getPayCode']]],['^closeModal',[['closePayModal']]]]}}" bind:payCode="__e" bind:closeModal="__e" bind:__l="__l"></keyboard-pay></block></view>